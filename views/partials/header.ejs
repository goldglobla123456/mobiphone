<!DOCTYPE html>
<html lang="<%= lang %>">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phone Store</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="container topbar-main">
        <a class="logo" href="/products">PhoneStore</a>

        <form class="top-search" action="/products" method="get">
          <input type="text" name="q" placeholder="Báº¡n tÃ¬m gÃ¬ hÃ´m nay..." />
          <button type="submit"><span class="nav-icon">ğŸ”</span>TÃ¬m</button>
        </form>
      </div>

      <div class="topbar-menu-wrap">
        <div class="container">
          <nav class="nav-links">
            <a class="nav-item" href="/products"><span class="nav-icon">ğŸ“±</span>Sáº£n pháº©m</a>           
            <% if (currentUser) { %>
            <a class="nav-item" href="/orders"><span class="nav-icon">ğŸ“¦</span>ÄÆ¡n hÃ ng</a>
            <a class="nav-item" href="/cart"><span class="nav-icon">ğŸ›’</span>Giá» hÃ ng (<%= cartCount %>)</a>
            <% if (currentUser.is_admin) { %>
            <a class="nav-item" href="/admin/products"><span class="nav-icon">âš™ï¸</span>Admin</a>
            <% } %>
            <form action="/logout" method="post" class="inline-form">
              <button class="link-btn nav-item" type="submit"><span class="nav-icon">â†©</span>ÄÄƒng xuáº¥t</button>
            </form>
            <% } else { %>
            <a class="nav-item" href="/login"><span class="nav-icon">ğŸ”</span>ÄÄƒng nháº­p</a>
            <a href="/register" class="btn btn-sm"><span class="nav-icon">âœ¨</span>ÄÄƒng kÃ½</a>
            <% } %>
            <form class="lang-form" action="#" method="get">
              <label for="lang-switch" class="lang-label"><span class="nav-icon">ğŸŒ</span></label>
              <select
                id="lang-switch"
                name="lang"
                class="lang-select"
                onchange="if(this.value){window.location.href='/language/' + this.value;}"
              >
                <option value="vi" <%= lang === 'vi' ? 'selected' : '' %>>Tiáº¿ng Viá»‡t</option>
                <option value="en" <%= lang === 'en' ? 'selected' : '' %>>English</option>
              </select>
            </form>
          </nav>
        </div>
      </div>
    </header>

    <main class="container">
      <% if (flash) { %>
      <div class="flash <%= flash.type === 'success' ? 'flash-success' : 'flash-error' %>">
        <%= flash.message %>
      </div>
      <% } %>
